rmse(i65elev$mod, i65elev$obs)
i65elev <- subset(i65elev,date >150)
rmse(i65elev$mod, i65elev$obs)
head(i65elev)
tail(i65elev)
i65elev <- read.csv("C:/Users/janesh/Dropbox/Paper_writing_Phd_study/Paper writing salinity intrusion Mobile River/Salt_Intrusion_Barry_R/output data/i65/i65_wse.csv")
head(i65elev)
i65elev <- subset(i65elev,date <148)
head(i65elev)
tail(i65elev)
rmse(i65elev$mod, i65elev$obs)
lm(i65elev$mod, i65elev$obs)
lm(i65elev$mod ~ i65elev$obs)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
i65elev <- read.csv("C:/Users/janesh/Dropbox/Paper_writing_Phd_study/Paper writing salinity intrusion Mobile River/Salt_Intrusion_Barry_R/output data/i65/i65_wse.csv")
head(i65elev)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
lmi65
rmse(i65elev$mod, i65elev$obs)
i65elev <- subset(i65elev,date <148)
head(i65elev)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
i65elev <- read.csv("C:/Users/janesh/Dropbox/Paper_writing_Phd_study/Paper writing salinity intrusion Mobile River/Salt_Intrusion_Barry_R/output data/i65/i65_wse.csv")
head(i65elev)
i65elev <- subset(i65elev,date <248)
head(i65elev)
tail(i65elev)
rmse(i65elev$mod, i65elev$obs)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
i65elev <- read.csv("C:/Users/janesh/Dropbox/Paper_writing_Phd_study/Paper writing salinity intrusion Mobile River/Salt_Intrusion_Barry_R/output data/i65/i65_wse.csv")
head(i65elev)
i65elev <- subset(i65elev,date > 130)
head(i65elev)
tail(i65elev)
rmse(i65elev$mod, i65elev$obs)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
i65elev <- subset(i65elev,date > 150)
head(i65elev)
tail(i65elev)
rmse(i65elev$mod, i65elev$obs)
lmi65 <- lm(i65elev$mod ~ i65elev$obs)
summary(lmi65)
library(quicktoolsr)
?quicktoolsr
condtosal
library(quicktoolsr)
?quicktoolsr
x <- seq(from=0,by=0.5,length=1000)
conc1 <- onedimdye(U =0.425, D=1, tt=360, x)
plot(x,conc1)
library(quicktoolsr)
readts_EE
smith <- read.csv("C:/Users/janesh/Dropbox/R software/smithdam/smithdam.csv")
head(smith)
names(smith) <- c("time","value")
names(smith) <- c("time","value")
library(ggplot2)
ggplot(smith)+geom_line(aes(time,value))
mata <- data.frame(c(1.5,2.1),c(3,4),c(5,6),nrow=3,ncol=2)
head(mata)
mata <- data.frame(1.5,2.1,3,4,5,6,nrow=3,ncol=2)
head(mata)
mata <- data.frame(c(1.5,2.1,3,4,5,6),nrow=3,ncol=2)
head(mata)
?data.frame
mata <- data.frame(c(1.5,2.1,3,4,5,6))
head(mata)
mata <- data.frame(x <- c(1.5,2.1), y <- c(3,4), z <- c(5,6))
head(mata)
mata <- data.frame(x <- c(1.5,2.1), y <- c(3,4), z <- c(5,6), ncol=2)
head(mata)
mata <- matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2)
head(mata)
mata <- data.frame (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2)
head(mata)
mata <- matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2)
head(mata)
mata <- matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2, byrow=F)
head(mata)
mata <- matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2, byrow=T)
head(mata)
matb <- matrix (data = c(4,5,6,7,8,9), nrow=3, ncol=2, byrow=T)
head(matb)
matc <- matrix (data = c(8,6, 9, 7 , 4, 3), nrow = 3, ncol=2, byrow = T)
head(matc)
check <- sapply(mata, function(x) x>2)
head(check)
check
mata <-data.frame( matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2, byrow=T))
head(mata)
mata <- matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2, byrow=T)
head(mata)
matb <- matrix (data = c(4,5,6,7,8,9), nrow=3, ncol=2, byrow=T)
head(matb)
matc <- matrix (data = c(8,6, 9, 7 , 4, 3), nrow = 3, ncol=2, byrow = T)
head(matc)
check <- sapply(mata, function(x) x>2)
head(check)
check <- sapply(mata, function(x) x>2,drop=F)
check <- sapply(mata, function(x) x>2)
head(check)
mata[check]
mata[check] * matb[check] * matc[check]
check <- sapply(mata, function(x) x>2, USE.NAMES=T)
head(check)
check
mata <- data.frame(matrix (data = c(1.5,2.1, 3, 4, 5, 6), nrow=3, ncol=2, byrow=T))
head(mata)
matb <- data.frame(matrix (data = c(4,5,6,7,8,9), nrow=3, ncol=2, byrow=T))
head(matb)
matc <- data.frame(matrix (data = c(8,6, 9, 7 , 4, 3), nrow = 3, ncol=2, byrow = T))
head(matc)
check <- sapply(mata, function(x) x>2, USE.NAMES=T)
head(check)
matb[check]
matb[check] * matc[check]
matb[check] * matc[check] * mata[check]
(for i in 1:3){
return(i)
}
for (i in 1:3){
return(i)
}
for i in (1:3){
return(i)
for i in 1,3){
for (i in 1,3){
for (i in 1:3){
return(i)
}
for (i in 1:3){
return([i])
}
for (i in 1:3){
i
}
for (i in 1:3){
return(i*2)
}
for (i in 1:3){
dat <- (i*2)
return(dat)
}
nnn <- for (i in 1:3){
dat <- (i*2)
return(dat)
}
nnn <- for (i in 1:3){
dat <- ([i]*2)
for (i in 1:10) {
return(a)
}
for (i in 1:10) {
foo.squared[i] = foo[i]^2
}
foo = seq(1, 100, by=2)
foo.squared = NULL
for (i in 1:10) {
foo.squared[i] = foo[i]^2
}
for (i in 1:10) {
foo.squared[i] = foo[i]^2
return(foo.squared)
}
for (i in 1:10) {
foo.squared = foo[i]^2
return(foo.squared)
}
for (i in 1:10) {
foo.squared = foo^2
return(foo.squared)
}
for (i in 1:10) {
foo.squared = foo^2
}
foot.squared
foo.squared
head(mat)
head(mata)
head(matb)
mata[check1]
check1 <- sapply[mata, function(x) x>1]
check1 <- sapply(mata, function(x) x>1)
head(check1)
mata[check1] * matb[check1]
mata[check1]
head(check1)
check1 <- data.frame(sapply(mata, function(x) x>1))
head(check1)
mata[check1]
check1 <- sapply(mata, function(x) x>1)
head(check1)
mata <- data.frame(matrix (data = c(1.5,2.1, 3.3, 4.5, 5.1, 6.5), nrow=3, ncol=2, byrow=T))
matb <- data.frame(matrix (data = c(4,5,6,7,8,9), nrow=3, ncol=2, byrow=T))
matc <- data.frame(matrix (data = c(8,6, 9, 7 , 4, 3), nrow = 3, ncol=2, byrow = T))
check1 <- sapply(mata, function(x) x>1)
head(check1)
mata[check1,] * matb[check1,]
check1
mata[check1,] * matb[check1,]
mata
matb
matc
mata*matb*matc
head(check1)
mata[check1[,]] * matb[check1[,]]
mata[check1] * matb[check1]
check1 <- sapply(mata, function(x) x>1)
head(check1)
check1
mata[check1] * matb[check1]
mata[check1,] * matb[check1,]
mata[check1] * matb[check1]
mata[check1,row=T] * matb[check1]
mata[check1,byrow=T] * matb[check1,byrow=T]
mata[check1] * matb[check1]
mata[check1]
mata
matb
matc
mata[check1] * matb[check1]
mata
matb
matc
check1 <- sapply(mata, function(x) x>2)
head(check1)
check1
mata[check1] * matb[check1] * matc[check1]
32*5.1
mata * matb * matc
rowSums(mata*matb*matc)
mata[check1,drop=F] * matb[check1] * matc[check1]
mata[check1,drop=F] * matb[check1] * matc[check1]
mata[check1] * matb[check1] * matc[check1]
df <- data.frame(cbind(mata,matb,matc))
df
df2 <- apply(df,1,function(x) {
a <- ifelse(x[1] > 2, (x[1]*x[3]*x[5]),0)
b <- ifelse(x[2] > 2, (x[2]*x[4]*x[6]),0)
return(a+b)
})
df2
mata[check1]
check1
mata[check1]
ifelse(check1,mata[check1],0)
ifelse(check1,mata[check1],0) * ifelse(check1,matb[check1],0) * ifelse(check1, matc[check1],0)
mata
matb
matc
transpose(ifelse(check1,mata[check1],0) * ifelse(check1,matb[check1],0) * ifelse(check1, matc[check1],0))
t{ifelse(check1,mata[check1],0) * ifelse(check1,matb[check1],0) * ifelse(check1, matc[check1],0)}
df3 <- ifelse(check1,mata[check1],0) * ifelse(check1,matb[check1],0) * ifelse(check1, matc[check1],0)
t{df3}
t(df3)
ifelse(check1,mata[check1],0) * ifelse(check1,matb[check1],0) * ifelse(check1, matc[check1],0)
mata
matb
matc
mata * matb * matc
ifelse(check1,mata[check1],0)
mata
mata[check1]
mata
ifelse(check1,mata[check1],0)
mata[check1]
check1
sapply(check1, function(x) if x=="FALSE", 0)
matA <- mata  #Copy your mata (so mata won't be changed, just the copy)
check1 <- sapply(mata, function(x) x>2)
matA[!check1]<-0 #Replace values that do not check with your criterion by 0
matA
mata
f <- function(mata,matb,matc,threshold){
matA <- mata
check1 <- sapply(mata, function(x) x>threshold)
matA[!check1]<-0
rowSums(matA*matb*matc)
}
sapply(0:30, function(x)f(mata,matb,matc,x))
rowSums(matA*matb*matc) #Compute
dim(vel)
mobileweather <- read.table(url, skip=24, sep=",", header=T)
mobileweather <- read.table("http://eng.auburn.edu/~jzd0009/weather/Mobile_Hourly1948_2012.txt", skip=24, sep=",", header=T)
head(mobileweather)
class(mobileweather$mm.dd.yyyy)
names(mobileweather$mm.dd.yyyy) <- c("date")
head(mobileweather)
colnames(mobileweather$mm.dd.yyyy) <- c("date")
names(mobileweather$mm.dd.yyyy) <- c("date")
head(mobileweather)
mobileweather$mm.dd.yyyy <- strptime(mobileweather$mm.dd.yyyy, format="%m/%d/%y")
class(mobileweather$mm.dd.yyyy)
sub_mobileweather <- subset(mobileweather, mm.dd.yy > as.POSIXct("12/31/2007") & mm.dd.yy < as.POSIXct("1/1/2012"))
sub_mobileweather <- subset(mobileweather, mm.dd.yyyy > as.POSIXct("12/31/2007") & mm.dd.yyyy < as.POSIXct("1/1/2012"))
(mobileweather)
head(mobileweather)
sub_mobileweather <- subset(mobileweather, mm.dd.yyyy > as.POSIXct("12/31/2007") & mm.dd.yyyy < as.POSIXct("1/1/2012"))
sub_mobileweather <- subset(mobileweather, mm.dd.yyyy > as.POSIXct("12/31/2007"))
class(mobileweather$mm.dd.yyyy)
names(mobileweather) <- c("date", "hour", "seapressure", "temp", "rel", "dewpoint", "windspeed", "winddir", "skycover", "precipitation")
sub_mobileweather <- subset(mobileweather, date > as.POSIXct("12/31/2007"))
sapply(mobileweather, class)
sub_mobileweather <- subset(mobileweather, date > as.POSIXct(12/31/2007))
sub_mobileweather$year <- format(sub_mobileweather$date, "%y")
sub_mobileweather$year <- format(sub_mobileweather$date, "%Y")
mobileweather$year <- format(mobileweather$date, "%Y")
head(mobileweather)
dim(mobileweather)
mobileweather <- read.table("http://eng.auburn.edu/~jzd0009/weather/Mobile_Hourly1948_2012.txt", skip=500000, sep=",", header=T)
head(mobileweather)
biglagoon <- read.table("data/biglagoon_USACE.txt", header=T, sep="\t")
library(signal)
?filter
library(signal)
?filter
?sum
?filter
?butter
f = 1/48 Sine
f = 1/48 sin(1)
f = 1/48 *sin(1)
f
x=seq(0,2,by=0.01)
y=2*sin(2*pi*(x-1/4))
plot(x,y)
x=seq(0,200,by=0.01)
y=2*sin(2*pi*(x-1/4))
plot(x,y)
x=seq(0,2,by=0.01)
y=2*sin(2*pi*(x-1/4))
x
y
plot(x,y)
x=seq(0,3,by=0.01)
y=2*sin(2*pi*(x-1/4))
x
y
plot(x,y)
x=seq(0,10,by=0.01)
y=2*sin(2*pi*(x-1/4))
x
y
plot(x,y)
plot(x,y, linetype="l")
plot(x,y, type="l")
library(quicktoolsr)
x <- 1:100
series <-  sin(2*x)+sin(x/4) + sin(x/8) + rnorm(100)
M <- 4; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
jd2 <- lanczos_filter(x=series,m=4, delt=(40/60))
qplot(x1,y1,geom="line") + geom_line(aes(x2,y2),col="red")
library(ggplot2)
qplot(x1,y1,geom="line") + geom_line(aes(x2,y2),col="red")
qplot(x*delt,series,geom="line") + geom_line(aes(x2,y2),col="red")
qplot(x*delt,series,geom="line") + geom_line(aes(x2,jd2),col="red")
M <- 8; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
jd2 <- lanczos_filter(x=series,m=4, delt=(40/60))
qplot(x*delt,series,geom="line") + geom_line(aes(x2,jd2),col="red")
M
jd2 <- lanczos_filter(x=series,m=8, delt=(40/60))
qplot(x*delt,series,geom="line") + geom_line(aes(x2,jd2),col="red")
x <- 1:100
series <-  sin(2*x)+sin(x/4) + sin(x/8) #+ rnorm(100)
M <- 8; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
jd2 <- lanczos_filter(x=series,m=8, delt=(40/60))
qplot(x*delt,series,geom="line") + geom_line(aes(x2,jd2),col="red")
library(quicktoolsr)
?lanczos_filter
filter2 <- function(x, m, delt) {
series <- x
tau_crit <- 3 # critical period (hours)
theta_crit <-  2*pi*delt/tau_crit # critical frequency
# get the lanczos coefficients
h <- sapply(-m:m, FUN=function(x)ifelse(x == 0,theta_crit*delta_t/pi,
(sin(x*theta_crit*delt)/(pi*x)) * (sin(x*pi/m)/(x*pi/m))))
# need to adjust the weights so that they add up to 1
h <- h/sum(h)
# step through each time for which we'd like to create a filtered value
y2 <- sapply((1+m):(length(series)-m), function(t){
sum(unlist(sapply(-m:m, FUN=function(x)(series[t+x]*h[m+x+1]))))
})
# return
return(y2)
}
filter2 <- function(x, m, delt, T_crit) {
series <- x
theta_crit <-  2*pi*delt/T_crit # critical frequency
# get the lanczos coefficients
h <- sapply(-m:m, FUN=function(x)ifelse(x == 0,theta_crit*delt/pi,
(sin(x*theta_crit*delt)/(pi*x)) * (sin(x*pi/m)/(x*pi/m))))
# need to adjust the weights so that they add up to 1
h <- h/sum(h)
# step through each time for which we'd like to create a filtered value
y2 <- sapply((1+m):(length(series)-m), function(t){
sum(unlist(sapply(-m:m, FUN=function(x)(series[t+x]*h[m+x+1]))))
})
# return
return(y2)
}
filter2 <- function(series, m, delt, T_crit) {
theta_crit <-  2*pi*delt/T_crit # critical frequency
# get the lanczos coefficients
h <- sapply(-m:m, FUN=function(x)ifelse(x == 0,theta_crit*delt/pi,
(sin(x*theta_crit*delt)/(pi*x)) * (sin(x*pi/m)/(x*pi/m))))
# need to adjust the weights so that they add up to 1
h <- h/sum(h)
# step through each time for which we'd like to create a filtered value
y2 <- sapply((1+m):(length(series)-m), function(t){
sum(unlist(sapply(-m:m, FUN=function(x)(series[t+x]*h[m+x+1]))))
})
# return
return(y2)
}
lanczos_filter
test.filter2 <- filter2(series,4,delt=2/3, T_crit=3)
test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3)
head(test.lanczos)
head(test.filter2)
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
test.lanczos
text.filter2
test.filter2
x <- 1:1000
series <-  sin(2*x)+sin(x/4) + sin(x/8) + rnorm(100)
M <- 4; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
test.filter2
test.lanczos
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
set.seed(100)
x <- 1:1000
series <-  sin(2*x)+sin(x/4) + sin(x/8) + rnorm(100)
head(series)
head(series)
M <- 4; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
jd2 <- lanczos_filter(x=series,m=4, delt=(40/60), T_critical=3)
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
filter2 <- function(series, m, delt, T_crit) {
theta_crit <-  2*pi*delt/T_crit # critical frequency
# get the lanczos coefficients
h <- sapply(-m:m, FUN=function(x)ifelse(x == 0,theta_crit*delt/pi,
(sin(x*theta_crit*delt)/(pi*x)) * (sin(x*pi/m)/(x*pi/m))))
# need to adjust the weights so that they add up to 1
h <- h/sum(h)
# step through each time for which we'd like to create a filtered value
y2 <- sapply((1+m):(length(series)-m), function(t){
sum(unlist(sapply(-m:m, FUN=function(x)(series[t+x]*h[m+x+1]))))
})
# return
return(y2)
}
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
x <- 1:10000
set.seed(100)
x <- 1:10000
series <-  sin(2*x)+sin(x/4) + sin(x/8) + rnorm(100)
M <- 4; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
jd2 <- lanczos_filter(x=series,m=4, delt=(40/60), T_critical=3)
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
plot(series)
plot(series,type="l")
plot(test.filer2)
plot(test.filter2)
plot(test.filter2, type="l")
plot(text.lanczos, type="l")
plot(test.lanczos, type="l")
x <- 1:1000
series <-  sin(2*x)+sin(x/4) + sin(x/8) + rnorm(100)
M <- 4; delt <- 2/3
x2 <- ((M+1):(length(series)-M))*delt
system.time(test.filter2 <- filter2(series,4,delt=2/3, T_crit=3))
system.time(test.lanczos <- lanczos_filter(x=series, m=4, delt=2/3, T_critical=3))
plot(test.lanczos, type="l")
plot(test.filter2)
library(quicktoolsr)
example(align_plots)
library(devtools)
setwd("C:/Users/janesh/Documents/quicktoolsr/")
load_all("C:/Users/janesh/Documents/quicktoolsr/")
document("C:/Users/janesh/Documents/quicktoolsr/")
build("C:/Users/janesh/Documents/quicktoolsr/")
check("C:/Users/janesh/Documents/quicktoolsr/")
